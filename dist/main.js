(()=>{"use strict";var t=new Map([["v_SafeSingleTri","attribute vec3 vertex_position;\nattribute vec3 vertex_color;\nvarying vec3 vColor;\nvoid main() {\ngl_Position = vec4(vertex_position, 1.0);\nvColor = vertex_color;\n}\n"],["f_SafeSingleTriWColor","\n        precision highp float;\n        varying vec3 vColor;\n        void main() {\n            gl_FragColor = vec4(vColor, 1.0);\n        }\n    "],["v_O2W&color","\n        attribute vec3 vertex_position;\n        attribute vec3 vertex_color;\n\n        uniform mat4 objectToWorld;\n\n        varying vec3 vColor;\n        void main() {\n            vec4 vertex = objectToWorld * vec4(vertex_position, 1);\n            gl_Position = vertex;\n            vColor = vertex_color;\n        }\n    "]]),r=function(){function r(t){this.context=t,this.program=t.createProgram()}return r.prototype.attachShaderFromShaderLib=function(r,e){if(!t.has(r))throw"Cannot find shader: ".concat(r," in shader library!");this.attachShaderFromString(t.get(r),e)},r.prototype.attachShaderFromString=function(t,e){var o;switch(e){case r.shaderTypes.VERTEX:o=this.context.VERTEX_SHADER;break;case r.shaderTypes.FRAGMENT:o=this.context.FRAGMENT_SHADER;break;default:throw"Cant implement shadertype: ".concat(e," in func attachShaderFromString!")}var n=this.context.createShader(o);if(this.context.shaderSource(n,t),this.context.compileShader(n),!this.context.getShaderParameter(n,this.context.COMPILE_STATUS)){var i=this.context.getShaderInfoLog(n);throw"Could not compile shader ".concat(e,". \n\n").concat(i)}this.context.attachShader(this.program,n)},r.prototype.useProgram=function(){if(this.context.linkProgram(this.program),!this.context.getProgramParameter(this.program,this.context.LINK_STATUS)){var t=this.context.getProgramInfoLog(this.program);throw"Could not compile WebGL program. \n\n".concat(t)}this.context.useProgram(this.program)},r.prototype.getAttributeLocation=function(t){return this.useProgram(),this.context.getAttribLocation(this.program,t)},r.prototype.getUniformLocation=function(t){return this.useProgram(),this.context.getUniformLocation(this.program,t)},r}();!function(t){var r;(r=t.shaderTypes||(t.shaderTypes={}))[r.VERTEX=0]="VERTEX",r[r.FRAGMENT=1]="FRAGMENT"}(r||(r={}));var e,o,n=function(){function t(t){this.canvas=t,this.context=t.getContext("webgl2"),this.shaderProgramHelper=null,this.context.enable(this.context.DEPTH_TEST)}return t.prototype.makeSeededProgramWrapper=function(){return new r(this.context)},t.prototype.attachProgramWrapper=function(t){this.shaderProgramHelper=t},t.prototype.buildAndPushArrayBuffer=function(t){var r=this.context.createBuffer();return this.context.bindBuffer(this.context.ARRAY_BUFFER,r),this.context.bufferData(this.context.ARRAY_BUFFER,t,this.context.STATIC_DRAW),this.context.bindBuffer(this.context.ARRAY_BUFFER,null),r},t.prototype.buildAndPushElementArrayBuffer=function(t){var r=this.context.createBuffer();return this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,r),this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,t,this.context.STATIC_DRAW),this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,null),r},t.prototype.bindAttributeNameToBuffer=function(t,r,e,o,n,i){if(null==this.shaderProgramHelper)throw"No shader program to try and attach attribute ".concat(r," to!");this.context.bindBuffer(this.context.ARRAY_BUFFER,t);var a=this.shaderProgramHelper.getAttributeLocation(r);this.context.vertexAttribPointer(a,e,this.context.FLOAT,o,n,i),this.context.enableVertexAttribArray(a),this.context.bindBuffer(this.context.ARRAY_BUFFER,null)},t.prototype.bindMatrixUniform=function(t,r,e){if(null==this.shaderProgramHelper)throw"No shader program to try and attach uniform ".concat(e," to!");var o=this.shaderProgramHelper.getUniformLocation(e);switch(r){case 2:this.context.uniformMatrix2fv(o,!1,t);break;case 3:this.context.uniformMatrix3fv(o,!1,t);break;case 4:this.context.uniformMatrix4fv(o,!1,t);break;default:throw"Matrix size of ".concat(r," has no gl sibling!")}},t.prototype.draw=function(t,r){this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,t),this.context.clearColor(.114,.541,.522,1),this.context.viewport(0,0,this.canvas.width,this.canvas.height),this.context.drawElements(this.context.TRIANGLES,r,this.context.UNSIGNED_SHORT,0)},t.prototype.clear=function(){this.context.clear(this.context.COLOR_BUFFER_BIT)},t.prototype.reportError=function(){var t=this.context.getError();t>0&&console.error("GL ERROR! Code: ".concat(t))},t}(),i=function(){function t(){this.TranslationMatrix=t.getIdentity(),this.ScalingMatrix=t.getIdentity(),this.XRotationMatrix=t.getIdentity(),this.YRotationMatrix=t.getIdentity(),this.ZRotationMatrix=t.getIdentity(),this.rotations=[0,0,0]}return t.getIdentity=function(){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]},t.prototype.setTranslation=function(r,e,o){var n=t.getIdentity();n[0][3]=r,n[1][3]=e,n[2][3]=o,this.TranslationMatrix=n},t.prototype.getTranslation=function(){return[this.TranslationMatrix[0][3],this.TranslationMatrix[1][3],this.TranslationMatrix[0][2]]},t.prototype.setScaling=function(r,e,o){var n=t.getIdentity();n[0][0]=r,n[1][1]=e,n[2][2]=o,this.ScalingMatrix=n},t.prototype.getScaling=function(){return[this.ScalingMatrix[1][1],this.ScalingMatrix[2][2],this.ScalingMatrix[3][3]]},t.prototype.setRotation=function(t,r,e){this.XRotationMatrix=this.createXRotationMatrix(t),this.YRotationMatrix=this.createYRotationMatrix(r),this.ZRotationMatrix=this.createZRotationMatrix(e),this.rotations=[t,r,e]},t.prototype.getRotation=function(){return this.rotations},t.prototype.computeTransformMatrix=function(){var r;r=t.multiply4x4Matrixes(this.TranslationMatrix,this.XRotationMatrix),r=t.multiply4x4Matrixes(r,this.YRotationMatrix),r=t.multiply4x4Matrixes(r,this.ZRotationMatrix),r=t.multiply4x4Matrixes(r,this.ScalingMatrix);for(var e=new Float32Array(16),o=0;o<4;o++)for(var n=0;n<4;n++)e[o+4*n]=r[o][n];return e},t.multiply4x4Matrixes=function(t,r){for(var e=this.getIdentity(),o=0;o<4;o++)for(var n=0;n<4;n++){e[o][n]=0;for(var i=0;i<4;i++)e[o][n]+=t[o][i]*r[i][n]}return e},t.prototype.createXRotationMatrix=function(r){var e=r*t.r2d,o=Math.cos(e),n=Math.sin(e);return[[1,0,0,0],[0,o,n,0],[0,-n,o,0],[0,0,0,1]]},t.prototype.createYRotationMatrix=function(r){var e=r*t.r2d,o=Math.cos(e),n=Math.sin(e);return[[o,0,n,0],[0,1,0,0],[-n,0,o,0],[0,0,0,1]]},t.prototype.createZRotationMatrix=function(r){var e=r*t.r2d,o=Math.cos(e),n=Math.sin(e);return[[o,n,0,0],[-n,o,0,0],[0,0,1,0],[0,0,0,1]]},t.r2d=Math.PI/180,t}(),a=function(){},s=function(){function t(t){this.transform=new i,this.geometry=new a,this.GLW=t}return t.prototype.draw=function(){var t=this.GLW.buildAndPushArrayBuffer(this.geometry.vertexes),r=this.GLW.buildAndPushArrayBuffer(this.geometry.colors),e=this.GLW.buildAndPushElementArrayBuffer(this.geometry.indexes);this.GLW.bindAttributeNameToBuffer(t,"vertex_position",3,!1,0,0),this.GLW.bindAttributeNameToBuffer(r,"vertex_color",3,!1,0,0),this.GLW.bindMatrixUniform(this.transform.computeTransformMatrix(),4,"objectToWorld"),this.GLW.draw(e,this.geometry.indexes.length)},t}(),c=(e=function(t,r){return e=s.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)s.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])},e(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?s.create(r):(o.prototype=r.prototype,new o)}),h=function(t){function r(r){var e=t.call(this,r)||this;return e.geometry.indexes=new Uint16Array([0,1,2,0,2,3,0]),e.geometry.vertexes=new Float32Array([-.5,.5,0,-.5,-.5,0,.5,-.5,0,.5,.5,0]),e.geometry.colors=e.geometry.vertexes.slice(),e}return c(r,t),r}(s),u=(c((function(t){var r=o.call(this,t)||this;return r.geometry.indexes=new Uint16Array([0,1,2,2,1,3,4,0,6,6,0,2,7,5,6,6,5,4,3,1,7,7,1,5,4,5,0,0,5,1,3,7,2,2,7,6]),r.geometry.vertexes=new Float32Array([-.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,.5]),r.geometry.colors=r.geometry.vertexes.slice(),r}),o=s),document.getElementById("screen"));u.width=1080,u.height=720;var f=new n(u),x=f.makeSeededProgramWrapper();x.attachShaderFromShaderLib("v_O2W&color",r.shaderTypes.VERTEX),x.attachShaderFromShaderLib("f_SafeSingleTriWColor",r.shaderTypes.FRAGMENT),f.attachProgramWrapper(x);var l=new h(f),p=new h(f);p.transform.setTranslation(.5,0,-.5);var d=0,g=0;setInterval((function(){l.transform.setRotation(d,0,0),p.transform.setRotation(0,-g,0),d=(d+1)%360,g=(g+2)%360,l.draw(),p.draw(),f.reportError()}),1e3/60)})();