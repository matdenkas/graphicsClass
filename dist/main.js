(()=>{"use strict";var t=new Map([["v_SafeSingleTri","attribute vec3 vertex_position;\nattribute vec3 vertex_color;\nvarying vec3 vColor;\nvoid main() {\ngl_Position = vec4(vertex_position, 1.0);\nvColor = vertex_color;\n}\n"],["f_SafeSingleTriWColor","\n        precision highp float;\n        varying vec3 vColor;\n        void main() {\n            gl_FragColor = vec4(vColor, 1.0);\n        }\n    "],["v_O2W&color","\n        attribute vec3 vertex_position;\n        attribute vec3 vertex_color;\n\n        uniform mat4 objectToWorld;\n\n        varying vec3 vColor;\n        void main() {\n            vec4 vertex = objectToWorld * vec4(vertex_position, 1);\n            gl_Position = vertex;\n            vColor = vertex_color;\n        }\n    "]]),e=function(){function e(t){this.context=t,this.program=t.createProgram()}return e.prototype.attachShaderFromShaderLib=function(e,r){if(!t.has(e))throw"Cannot find shader: ".concat(e," in shader library!");this.attachShaderFromString(t.get(e),r)},e.prototype.attachShaderFromString=function(t,r){var o;switch(r){case e.shaderTypes.VERTEX:o=this.context.VERTEX_SHADER;break;case e.shaderTypes.FRAGMENT:o=this.context.FRAGMENT_SHADER;break;default:throw"Cant implement shadertype: ".concat(r," in func attachShaderFromString!")}var a=this.context.createShader(o);if(this.context.shaderSource(a,t),this.context.compileShader(a),!this.context.getShaderParameter(a,this.context.COMPILE_STATUS)){var i=this.context.getShaderInfoLog(a);throw"Could not compile shader ".concat(r,". \n\n").concat(i)}this.context.attachShader(this.program,a)},e.prototype.useProgram=function(){if(this.context.linkProgram(this.program),!this.context.getProgramParameter(this.program,this.context.LINK_STATUS)){var t=this.context.getProgramInfoLog(this.program);throw"Could not compile WebGL program. \n\n".concat(t)}this.context.useProgram(this.program)},e.prototype.getAttributeLocation=function(t){return this.useProgram(),this.context.getAttribLocation(this.program,t)},e.prototype.getUniformLocation=function(t){return this.useProgram(),this.context.getUniformLocation(this.program,t)},e}();!function(t){var e;(e=t.shaderTypes||(t.shaderTypes={}))[e.VERTEX=0]="VERTEX",e[e.FRAGMENT=1]="FRAGMENT"}(e||(e={}));var r=function(){function t(t){this.canvas=t,this.context=t.getContext("webgl2"),this.shaderProgramHelper=null,this.context.enable(this.context.DEPTH_TEST)}return t.prototype.makeSeededProgramWrapper=function(){return new e(this.context)},t.prototype.attachProgramWrapper=function(t){this.shaderProgramHelper=t},t.prototype.buildAndPushArrayBuffer=function(t){var e=this.context.createBuffer();return this.context.bindBuffer(this.context.ARRAY_BUFFER,e),this.context.bufferData(this.context.ARRAY_BUFFER,t,this.context.STATIC_DRAW),this.context.bindBuffer(this.context.ARRAY_BUFFER,null),e},t.prototype.buildAndPushElementArrayBuffer=function(t){var e=this.context.createBuffer();return this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,e),this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,t,this.context.STATIC_DRAW),this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,null),e},t.prototype.bindAttributeNameToBuffer=function(t,e,r,o,a,i){if(null==this.shaderProgramHelper)throw"No shader program to try and attach attribute ".concat(e," to!");this.context.bindBuffer(this.context.ARRAY_BUFFER,t);var n=this.shaderProgramHelper.getAttributeLocation(e);this.context.vertexAttribPointer(n,r,this.context.FLOAT,o,a,i),this.context.enableVertexAttribArray(n),this.context.bindBuffer(this.context.ARRAY_BUFFER,null)},t.prototype.bindMatrixUniform=function(t,e,r){if(null==this.shaderProgramHelper)throw"No shader program to try and attach uniform ".concat(r," to!");var o=this.shaderProgramHelper.getUniformLocation(r);switch(e){case 2:this.context.uniformMatrix2fv(o,!1,t);break;case 3:this.context.uniformMatrix3fv(o,!1,t);break;case 4:this.context.uniformMatrix4fv(o,!1,t);break;default:throw"Matrix size of ".concat(e," has no gl sibling!")}},t.prototype.draw=function(e,r,o){var a;switch(this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,e),this.context.clearColor(.114,.541,.522,1),this.context.viewport(0,0,this.canvas.width,this.canvas.height),o){case t.drawModes.LINES:a=this.context.LINE_LOOP;break;case t.drawModes.TRIANGLES:a=this.context.TRIANGLES;break;case t.drawModes.TRIANGLE_STRIP:a=this.context.TRIANGLE_STRIP;break;case t.drawModes.POINTS:a=this.context.POINTS}this.context.drawElements(a,r,this.context.UNSIGNED_SHORT,0)},t.prototype.clear=function(){this.context.clear(this.context.COLOR_BUFFER_BIT)},t.prototype.reportError=function(){var t=this.context.getError();t>0&&console.error("GL ERROR! Code: ".concat(t))},t.prototype.deleteBuffer=function(t){this.context.deleteBuffer(t)},t}();!function(t){var e;(e=t.drawModes||(t.drawModes={}))[e.LINES=0]="LINES",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.POINTS=3]="POINTS"}(r||(r={}));var o,a,i=function(){function t(){this.TranslationMatrix=t.getIdentity(),this.ScalingMatrix=t.getIdentity(),this.XRotationMatrix=t.getIdentity(),this.YRotationMatrix=t.getIdentity(),this.ZRotationMatrix=t.getIdentity(),this.rotations=[0,0,0]}return t.getIdentity=function(){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]},t.prototype.setTranslation=function(e,r,o){var a=t.getIdentity();a[0][3]=e,a[1][3]=r,a[2][3]=o,this.TranslationMatrix=a},t.prototype.getTranslation=function(){return[this.TranslationMatrix[0][3],this.TranslationMatrix[1][3],this.TranslationMatrix[2][3]]},t.prototype.setScaling=function(e,r,o){var a=t.getIdentity();a[0][0]=e,a[1][1]=r,a[2][2]=o,this.ScalingMatrix=a},t.prototype.getScaling=function(){return[this.ScalingMatrix[1][1],this.ScalingMatrix[2][2],this.ScalingMatrix[3][3]]},t.prototype.setRotation=function(t,e,r){this.XRotationMatrix=this.createXRotationMatrix(t),this.YRotationMatrix=this.createYRotationMatrix(e),this.ZRotationMatrix=this.createZRotationMatrix(r),this.rotations=[t,e,r]},t.prototype.getRotation=function(){return this.rotations},t.prototype.computeTransformMatrix=function(){var e;e=t.multiply4x4Matrixes(this.TranslationMatrix,this.XRotationMatrix),e=t.multiply4x4Matrixes(e,this.YRotationMatrix),e=t.multiply4x4Matrixes(e,this.ZRotationMatrix),e=t.multiply4x4Matrixes(e,this.ScalingMatrix);for(var r=new Float32Array(16),o=0;o<4;o++)for(var a=0;a<4;a++)r[o+4*a]=e[o][a];return r},t.multiply4x4Matrixes=function(t,e){for(var r=this.getIdentity(),o=0;o<4;o++)for(var a=0;a<4;a++){r[o][a]=0;for(var i=0;i<4;i++)r[o][a]+=t[o][i]*e[i][a]}return r},t.prototype.createXRotationMatrix=function(e){var r=e*t.r2d,o=Math.cos(r),a=Math.sin(r);return[[1,0,0,0],[0,o,a,0],[0,-a,o,0],[0,0,0,1]]},t.prototype.createYRotationMatrix=function(e){var r=e*t.r2d,o=Math.cos(r),a=Math.sin(r);return[[o,0,a,0],[0,1,0,0],[-a,0,o,0],[0,0,0,1]]},t.prototype.createZRotationMatrix=function(e){var r=e*t.r2d,o=Math.cos(r),a=Math.sin(r);return[[o,a,0,0],[-a,o,0,0],[0,0,1,0],[0,0,0,1]]},t.r2d=Math.PI/180,t}(),n=function(){function t(){}return t.prototype.setVertexes=function(t){this.vertexes=t,this.bufferNeeded=!0},t.prototype.getVertexes=function(){return this.vertexes.slice()},t.prototype.setColors=function(t){this.colors=t,this.bufferNeeded=!0},t.prototype.getColors=function(){return this.colors},t.prototype.setIndexes=function(t){this.indexes=t,this.bufferNeeded=!0},t.prototype.getIndexes=function(){return this.indexes},t}(),s=function(){function t(t){this.transform=new i,this.geometry=new n,this.programShader=t.makeSeededProgramWrapper(),this.GLW=t}return t.prototype.draw=function(){this.geometry.bufferNeeded&&(this.buffer(),this.geometry.bufferNeeded=!1),this.GLW.attachProgramWrapper(this.programShader),this.GLW.bindAttributeNameToBuffer(this.verticesBuffer,"vertex_position",3,!1,0,0),this.GLW.bindAttributeNameToBuffer(this.colorBuffer,"vertex_color",3,!1,0,0),this.GLW.bindMatrixUniform(this.transform.computeTransformMatrix(),4,"objectToWorld"),this.GLW.draw(this.indicesBuffer,this.geometry.getIndexes().length,this.drawMode)},t.prototype.buffer=function(){this.GLW.deleteBuffer(this.verticesBuffer),this.GLW.deleteBuffer(this.colorBuffer),this.GLW.deleteBuffer(this.indicesBuffer),this.verticesBuffer=this.GLW.buildAndPushArrayBuffer(this.geometry.getVertexes()),this.colorBuffer=this.GLW.buildAndPushArrayBuffer(this.geometry.getColors()),this.indicesBuffer=this.GLW.buildAndPushElementArrayBuffer(this.geometry.getIndexes())},t}(),h=(o=function(t,e){return o=s.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)s.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?s.create(e):(r.prototype=e.prototype,new r)}),c=(h((function(t){var o=a.call(this,t)||this;return o.drawMode=r.drawModes.TRIANGLES,o.geometry.setIndexes(new Uint16Array([0,1,2,0,2,3,0])),o.geometry.setVertexes(new Float32Array([-.5,.5,0,-.5,-.5,0,.5,-.5,0,.5,.5,0])),o.geometry.setColors(o.geometry.getVertexes().slice()),o.programShader.attachShaderFromShaderLib("v_O2W&color",e.shaderTypes.VERTEX),o.programShader.attachShaderFromShaderLib("f_SafeSingleTriWColor",e.shaderTypes.FRAGMENT),o}),a=s),function(t){h((function(o){var a=t.call(this,o)||this;return a.drawMode=r.drawModes.TRIANGLES,a.geometry.setIndexes(new Uint16Array([2,3,0,2,0,1,2,1,3,3,0,1])),a.geometry.setVertexes(new Float32Array([Math.sqrt(8/9),0,-1/3,-Math.sqrt(2/9),Math.sqrt(2/3),-1/3,-Math.sqrt(2/9),-Math.sqrt(2/3),-1/3,0,0,1])),a.geometry.setColors(a.geometry.getVertexes().slice()),a.programShader.attachShaderFromShaderLib("v_O2W&color",e.shaderTypes.VERTEX),a.programShader.attachShaderFromShaderLib("f_SafeSingleTriWColor",e.shaderTypes.FRAGMENT),a}),t)}(s),function(t){h((function(o){var a=t.call(this,o)||this;return a.drawMode=r.drawModes.TRIANGLES,a.geometry.setIndexes(new Uint16Array([0,1,2,2,1,3,4,0,6,6,0,2,7,5,6,6,5,4,3,1,7,7,1,5,4,5,0,0,5,1,3,7,2,2,7,6])),a.geometry.setVertexes(new Float32Array([-.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,.5])),a.geometry.setColors(a.geometry.getVertexes().slice()),a.programShader.attachShaderFromShaderLib("v_O2W&color",e.shaderTypes.VERTEX),a.programShader.attachShaderFromShaderLib("f_SafeSingleTriWColor",e.shaderTypes.FRAGMENT),a}),t)}(s),function(t){h((function(o){var a=t.call(this,o)||this;return a.drawMode=r.drawModes.TRIANGLES,a.geometry.setIndexes(new Uint16Array([1,2,0,1,0,3,1,3,5,1,5,2,4,0,2,4,3,0,4,5,3,4,2,5])),a.geometry.setVertexes(new Float32Array([0,0,1,0,1,0,-1,0,0,1,0,0,0,-1,0,0,0,-1])),a.geometry.setColors(a.geometry.getVertexes().slice()),a.programShader.attachShaderFromShaderLib("v_O2W&color",e.shaderTypes.VERTEX),a.programShader.attachShaderFromShaderLib("f_SafeSingleTriWColor",e.shaderTypes.FRAGMENT),a}),t)}(s),function(t){h((function(o){var a=t.call(this,o)||this;return a.drawMode=r.drawModes.TRIANGLES,a.geometry.setIndexes(new Uint16Array([18,2,1,11,18,1,14,11,1,7,13,1,17,7,1,2,17,1,19,4,3,8,19,3,15,8,3,12,16,3,0,12,3,4,0,3,6,15,3,5,6,3,16,5,3,5,14,1,6,5,1,13,6,1,9,17,2,10,9,2,18,10,2,10,0,4,9,10,4,19,9,4,19,8,7,9,19,7,17,9,7,8,15,6,7,8,6,13,7,6,11,14,5,12,11,5,16,12,5,12,0,10,11,12,10,18,11,10])),a.geometry.setVertexes(new Float32Array([-.57735,-.57735,.57735,.934172,.356822,0,.934172,-.356822,0,-.934172,.356822,0,-.934172,-.356822,0,0,.934172,.356822,0,.934172,-.356822,.356822,0,-.934172,-.356822,0,-.934172,0,-.934172,-.356822,0,-.934172,.356822,.356822,0,.934172,-.356822,0,.934172,.57735,.57735,-.57735,.57735,.57735,.57735,-.57735,.57735,-.57735,-.57735,.57735,.57735,.57735,-.57735,-.57735,.57735,-.57735,.57735,-.57735,-.57735,-.57735])),a.geometry.setColors(a.geometry.getVertexes().slice()),a.programShader.attachShaderFromShaderLib("v_O2W&color",e.shaderTypes.VERTEX),a.programShader.attachShaderFromShaderLib("f_SafeSingleTriWColor",e.shaderTypes.FRAGMENT),a}),t)}(s),function(t){function o(o){var a=t.call(this,o)||this;return a.drawMode=r.drawModes.TRIANGLES,a.geometry.setIndexes(new Uint16Array([1,2,6,1,7,2,3,4,5,4,3,8,6,5,11,5,6,10,9,10,2,10,9,3,7,8,9,8,7,0,11,0,1,0,11,4,6,2,10,1,6,11,3,5,10,5,4,11,2,7,9,7,1,0,3,9,8,4,8,0])),a.geometry.setVertexes(new Float32Array([0,-.525731,.850651,.850651,0,.525731,.850651,0,-.525731,-.850651,0,-.525731,-.850651,0,.525731,-.525731,.850651,0,.525731,.850651,0,.525731,-.850651,0,-.525731,-.850651,0,0,-.525731,-.850651,0,.525731,-.850651,0,.525731,.850651])),a.geometry.setColors(a.geometry.getVertexes().slice()),a.programShader.attachShaderFromShaderLib("v_O2W&color",e.shaderTypes.VERTEX),a.programShader.attachShaderFromShaderLib("f_SafeSingleTriWColor",e.shaderTypes.FRAGMENT),a}return h(o,t),o}(s)),d=(function(t){h((function(o){var a=t.call(this,o)||this;return a.drawMode=r.drawModes.LINES,a.geometry.setIndexes(new Uint16Array([0,1,2,0,2,1,3,2,4,0,6,4,6,0,2,6,7,5,6,7,6,5,4,6,3,1,7,3,7,1,5,7,4,5,0,4,0,5,1,0,3,7,2,3,2,7,6,2])),a.geometry.setVertexes(new Float32Array([-.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,.5])),a.geometry.setColors(a.geometry.getVertexes().slice()),a.programShader.attachShaderFromShaderLib("v_O2W&color",e.shaderTypes.VERTEX),a.programShader.attachShaderFromShaderLib("f_SafeSingleTriWColor",e.shaderTypes.FRAGMENT),a}),t)}(s),document.getElementById("screen"));d.width=800,d.height=800;var f=new r(d),u=(new Float32Array([.4,0,0,.4,0,0,.4,0,0,.4,0,0,.4,0,0,.4,0,0,.4,0,0,1,0,1,1,0,1]),new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Float32Array([1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0]),new Float32Array([0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]),!1),l=!1,p=0,g=document.getElementById("body");null==g||g.addEventListener("keydown",(function(t){"t"==t.key&&(u=!u),"c"==t.key&&(p=++p%3),"w"==t.key&&(l=!l)}));var x=new c(f);x.draw();var y=0;setInterval((function(){x.transform.setRotation(y,0,y),x.draw(),f.reportError(),y=(y+1)%360}),1e3/60)})();